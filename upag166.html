UPAK822 底部留言加验证码

需要修改的文件有：
/static/static/inc/global/chat.php
/inc/class/ly200.php
/static/js/themes.js
/static/static/themes/对应风格/css/style.css

/static/static/inc/global/chat.php
<div id="footer_feedback" class="up">
	<div class="title" style=" background:#<?=$footer_bg?>;">
    	<?=$c['lang_pack']['chat']['title']?>
        <a class="close" href="javascript:void(0);"></a>
    </div>
	<div id="lib_feedback_form">
        <form method="post" name="feedback">
            <div class="demo">
                <div class="blank6"></div>
                <div class="tips_title"><?=$c['lang_pack']['chat']['name']?><font color="red">*</font>:</div>
                <div class="blank6"></div>
                <input type="text" class="text" name="Name" placeholder="<?=$c['lang_pack']['chat']['name_tips']?>" notnull />
                <div class="blank15"></div>
                <div class="tips_title"><?=$c['lang_pack']['chat']['email']?><font color="red">*</font>:</div>
                <div class="blank6"></div>
                <input type="text" class="text" name="Email" placeholder="<?=$c['lang_pack']['chat']['email_tips']?>" notnull />
                <div class="blank15"></div>
                <div class="tips_title"><?=$c['lang_pack']['chat']['got']?><font color="red">*</font>:</div>
                <div class="blank6"></div>
                <textarea class="text" name="Message" placeholder="<?=$c['lang_pack']['chat']['got_tips']?>" notnull></textarea>
                <div class="blank15"></div>
				<div class="tips_title"><?=$c['lang_pack']['feedback_arr']['code']?><font color="red">*</font>:</div>
				<div class="blank6"></div>
				<div class="vcode_box">
					<input type="text" class="text vcode" name="VCode" notnull maxlength="4" placeholder="<?=$c['lang_pack']['feedback_arr']['code']?>"/> <?=v_code::create('feedback');?>
				</div>
				<div class="blank15"></div>
                <input type="hidden" name="float" value="<?//=$_SESSION['feedback_time'];?>" />
                <input type="submit" class="send" value="<?=$c['lang_pack']['chat']['send']?>" style=" background:#<?=$footer_bg?>;" />
                <input type="hidden" name="Site" value="<?=trim($c['lang'],'_');?>" />
            </div>
        </form>
    </div>
</div>



/static/static/themes/对应风格/css/style.css
<style>
    body #footer_feedback>form {overflow-y: auto;box-sizing: border-box;height: 270px;padding-bottom: 10px;}
    body #footer_feedback .demo .vcode_box {display: flex;gap: 5%;}
</style>


/inc/class/ly200.php 当有非模块的css和js有改动的时候，需要在更新$refresh='?v='.$c['ProjectVersion'] . '0'; //.time();
	public static function load_static(){
		global $c;
		$static='';
		$refresh='?v='.$c['ProjectVersion'] . '0'; //.time();
		$args=func_get_args();
		foreach((array)$args as $v){
			if(is_array($v)){
				$attr=$v[1];
				$v=$v[0];
			}
			$ext_name=file::get_ext_name($v);
			if($c['custom']==1){
				//if($v!='/static/css/global.css'){
					(((int)$c['config']['global']['IsCdn'] || (int)$c['manage']['config']['IsCdn']) && $c['cdn_available']==1) && $v=str_replace('/static/', $c['cdn'].'static/custom/' . substr($c['Number'], 0, 4) . '/'.$c['Number'].'/', $v);
				//}
			}else{
				(((int)$c['config']['global']['IsCdn'] || (int)$c['manage']['config']['IsCdn']) && $c['cdn_available']==1) && $v=str_replace('/static/', $c['cdn'].'static/v1/v'.$c['ProjectVersion'].'/', $v);
			}
			if($ext_name=='css'){
				$static.="<link href='{$v}$refresh' rel='stylesheet' type='text/css' $attr />\r\n";
			}elseif($ext_name=='js'){
				$static.="<script type='text/javascript' src='{$v}$refresh' $attr></script>\r\n";
			}
		}
		
		return $static;
	}


/static/js/themes.js


<style>
	@media screen and (max-width:1000px) {
		body #themes_header_board .borardFixedBox .contactInfoBox{display:flex !important;}
	}
</style>

<style>
	.ly_product_description_1 .i_overview_table {width: 100%;}
	.ly_product_description_1 .editor_txt .i_content .editor_table_wrap {width: 100%;}
</style>

4.0 chat验证码询盘验证码添加

/static/css/themes.css
<style>
#footer_feedback{ width:298px; position:fixed; height:360px; bottom:-400px; right:0px; background:#fff; border-radius:5px 5px 0 0; overflow:hidden; z-index:10001;}
#footer_feedback .demo .vcode_box {display: flex;gap: 5%;}
</style>

/static/js/themes.js
<script>
	$("#footer_feedback").animate({bottom:-320},function(){
		$("#footer_feedback").animate({bottom:-340},function(){
			$("#footer_feedback").animate({bottom:-320});
		});
	});
	$("#footer_feedback .title .close").click(function(){$("#footer_feedback").remove();});

	$('#footer_feedback .title').click(function(){//底部留言js
		if($(this).parent('#footer_feedback').attr('class')=='up'){
			$(this).parent('#footer_feedback').stop(false,true).animate({bottom:"0px"},'fast');
			$(this).parent('#footer_feedback').removeClass('up');
		}else{
			$(this).parent('#footer_feedback').stop(false,true).animate({bottom:"-320px"},'fast');
			$(this).parent('#footer_feedback').addClass('up');
		}
	});
</script>

/static/static/inc/global/chat.php

<?php !isset($c) && exit();?>
<?php
	$IsFooter = db::get_value('config',"Variable='Is_footer_feedback'","Value");
	$footer_bg = db::get_value('config',"Variable='FooterColor'","Value");
	$_SESSION['feedback_time'] = md5(microtime());
	if($IsFooter){
?>
<div id="footer_feedback" class="up">
	<div class="title" style=" background:#<?=$footer_bg?>;">
    	<?=$c['lang_pack']['chat']['title']?>
        <a class="close" href="javascript:void(0);"></a>
    </div>
	<div id="lib_feedback_form">
        <form method="post" name="feedback">
            <div class="demo">
                <div class="blank6"></div>
                <div class="tips_title"><?=$c['lang_pack']['chat']['name']?><font color="red">*</font>:</div>
                <div class="blank6"></div>
                <input type="text" class="text" name="Name" placeholder="<?=$c['lang_pack']['chat']['name_tips']?>" notnull />
                <div class="blank15"></div>
                <div class="tips_title"><?=$c['lang_pack']['chat']['email']?><font color="red">*</font>:</div>
                <div class="blank6"></div>
                <input type="text" class="text" name="Email" placeholder="<?=$c['lang_pack']['chat']['email_tips']?>" notnull />
                <div class="blank15"></div>
                <div class="tips_title"><?=$c['lang_pack']['chat']['got']?><font color="red">*</font>:</div>
                <div class="blank6"></div>
                <textarea class="text" name="Message" placeholder="<?=$c['lang_pack']['chat']['got_tips']?>" notnull></textarea>
                <div class="blank15"></div>
				<div class="tips_title"><?=$c['lang_pack']['feedback_arr']['code']?><font color="red">*</font>:</div>
				<div class="blank6"></div>
				<div class="vcode_box">
					<input type="text" class="text vcode" name="VCode" notnull maxlength="4" placeholder="<?=$c['lang_pack']['feedback_arr']['code']?>"/> <?=v_code::create('feedback');?>
				</div>
				<div class="blank15"></div>
                <input type="hidden" name="float" value="<?//=$_SESSION['feedback_time'];?>" />
                <input type="submit" class="send" value="<?=$c['lang_pack']['chat']['send']?>" style=" background:#<?=$footer_bg?>;" />
                <input type="hidden" name="Site" value="<?=trim($c['lang'],'_');?>" />
            </div>
        </form>
    </div>
</div>
<?php }?>